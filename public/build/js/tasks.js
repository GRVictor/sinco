!function(){!async function(){try{const e=`/api/tasks?url=${t()}`,n=await fetch(e),o=await n.json(),{tasks:a}=o;!function(e){if(0===e.length){const e=document.querySelector("#task-list"),t=document.createElement("LI");return t.textContent="No hay tareas en este proyecto",t.classList.add("no-tasks"),void e.appendChild(t)}e.forEach((e=>{const t=document.createElement("LI");t.dataset.taskId=e.id,t.classList.add("task");const n=document.createElement("P");n.textContent=e.name,console.log(n)}))}(a)}catch(e){console.log(e)}}();function e(e,t,n){const o=document.querySelector(".alert");o&&o.remove();const a=document.createElement("DIV");a.classList.add("alert",t),a.textContent=e,n.parentElement.insertBefore(a,n.nextElementSibling),setTimeout((()=>{a.remove()}),3e3)}function t(){return Object.fromEntries(new URLSearchParams(window.location.search)).url}document.querySelector("#add-task").addEventListener("click",(function(){const n=document.createElement("DIV");n.classList.add("modal"),n.innerHTML='\n            <form class="form new-task">\n                <legend>Agregar una tarea</legend>\n                <div class="field">\n                    <label for="task">Nombre de la tarea</label>\n                    <input type="text" id="task" name="task" placeholder="Ingresa el nombre de la tarea"/>\n                </div>\n\n                <div class="options">\n                    <input type="submit" class="submit-new-task" value="Aceptar"/>\n                    <button type="button" class="close-modal">Cancelar</button>\n                </div>\n\n            </form>\n            ',setTimeout((()=>{document.querySelector(".form").classList.add("animate")}),0),n.addEventListener("click",(o=>{if(o.preventDefault(),o.target.classList.contains("close-modal")){document.querySelector(".form").classList.add("close"),setTimeout((()=>{n.remove()}),500)}o.target.classList.contains("submit-new-task")&&function(){const n=document.querySelector("#task").value.trim();if(console.log(n),""===n)return void e("El nombre de la tarea es obligatorio","error",document.querySelector(".form legend"));!async function(n){const o=new FormData;o.append("name",n),o.append("projectId",t());try{const t="http://localhost:3000/api/tasks",n=await fetch(t,{method:"POST",body:o}),a=await n.json();if(console.log(a),e(a.message,a.type,document.querySelector(".form legend")),"success"===a.type){const e=document.querySelector(".modal");setTimeout((()=>{e.remove()}),2500)}}catch(e){console.log(e)}}(n)}()})),document.querySelector(".dashboard").appendChild(n)}))}();